easyblock = 'PythonBundle'

name = 'dxpy'
version = '0.345.0'

homepage = 'http://autodoc.dnanexus.com/'
description = "DNAnexus Platform API bindings for Python"

toolchain = {'name': 'foss', 'version': '2022a'}

dependencies = [
    ('Python', '3.10.4'),
    ('FUSE', '3.14.1'),
]

use_pip = True
sanity_pip_check = True

exts_list = [
    ('xattr', '0.10.1', {
        'checksums': ['c12e7d81ffaa0605b3ac8c22c2994a8e18a9cf1c59287a1b7722a2289c952ec5'],
    }),
    ('fusepy', '3.0.1', {
        'modulename': 'fuse',
        'patches': ['fusepy-3.0.1_fix-libfuse.patch'],
        'checksums': [
            '72ff783ec2f43de3ab394e3f7457605bf04c8cf288a2f4068b4cde141d4ee6bd',  # fusepy-3.0.1.tar.gz
            '7650c5f922c24b820f2b33e0b5b1af8923c1a5c4ff397701cd970ea33c757fbe',  # fusepy-3.0.1_fix-libfuse.patch
        ],
    }),
    ('backports.ssl_match_hostname', '3.7.0.1', {
        'checksums': ['bb82e60f9fbf4c080eabd957c39f0641f0fc247d9a16e31e26d594d8f42b9fd2'],
    }),
    ('psutil', '5.9.5', {
        'checksums': ['5410638e4df39c54d957fc51ce03048acd8e6d60abc0f5107af51e5fb566eb3c'],
    }),
    ('trove-classifiers', '2023.4.18', {
        'checksums': ['9f892a83ccbdf9e669861a947c6b03d5b91a87f449aefef1d76fc4169f78ddba'],
    }),
    # The Python pathspec is too old for hatchling, version >= 0.10.0 is required
    ('pathspec', '0.11.1', {
        'checksums': ['2798de800fa92780e33acca925945e9a19a133b715067cf165b8866c15a31687'],
    }),
    ('hatchling', '1.14.0', {
        'checksums': ['462ea91df03ff5d52813b5613fec1313a1a2059d2e37343e572b3f979867c5da'],
    }),
    ('beautifulsoup4', '4.12.2', {
        'modulename': 'bs4',
        'checksums': ['492bbc69dca35d12daac71c4db1bfff0c876c00ef4a2ffacce226d4638eb72da'],
    }),
    ('python-magic', '0.4.27', {
        'modulename': 'magic',
        'checksums': ['c1ba14b08e4a5f5c31a302b7721239695b2f0f058d125bd5ce1ee36b9d9d3c3b'],
    }),
    ('websocket_client', '1.5.1', {
        'modulename': 'websocket',
        'sources': ['websocket-client-%(version)s.tar.gz'],
        'checksums': ['3f09e6d8230892547132177f575a4e3e73cfdf06526e20cc02aa1c3b47184d40'],
    }),
    ('pycparser', '2.21', {
        'checksums': ['e644fdec12f7872f86c58ff790da456218b10f863970249516d60a5eaca77206'],
    }),
    ('cffi', '1.15.1', {
        'checksums': ['d400bfb9a37b1351253cb402671cea7e89bdecc294e8016a707f6d1d8ac934f9'],
    }),
    (name, version, {
        'checksums': ['cf5b47e83866a9c87a4fc59262eac500e860f6a890e6a897a577eff68e28cff2'],
    }),
]

sanity_check_paths = {
    'files': ['bin/dx'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

moduleclass = 'bio'
