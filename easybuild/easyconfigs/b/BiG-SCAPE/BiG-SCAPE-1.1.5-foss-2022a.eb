easyblock = 'PythonPackage'

name = 'BiG-SCAPE'
version = '1.1.5'

homepage = 'https://bigscape-corason.secondarymetabolites.org/index.html'
description = """BiG-SCAPE and CORASON provide a set of tools to explore the diversity of biosynthetic gene clusters 
(BGCs) across large numbers of genomes, by constructing BGC sequence similarity networks, grouping BGCs into gene 
cluster families, and exploring gene cluster diversity linked to enzyme phylogenies."""

toolchain = {'name': 'foss', 'version': '2022a'}

github_account = 'medema-group'
source_urls = [GITHUB_SOURCE]
sources = ['v%(version)s.tar.gz']
checksums = ['ec7cebbec8f83f4187c80e02ecbb37411a1898a2b83bb80088810f1600528ec7']

dependencies = [
    ('Python', '3.10.4'),
    ('SciPy-bundle', '2022.05'),
    ('Biopython', '1.79'),
    ('scikit-learn', '1.1.2'),
    ('networkx', '2.8.4'),
    ('HMMER', '3.3.2'),
    ('FastTree', '2.1.11'),
]

use_pip = True
download_dep_fail = True
sanity_pip_check = True

options = {'modulename': False}

sanity_check_commands = [
    'bigscape.py --help',
]

modloadmsg = "%(name)s needs processed Pfam database to work properly.\n"
modloadmsg += "For this, download the latest 'Pfam-A.hmm.gz' file from the Pfam website"
modloadmsg += "(http://ftp.ebi.ac.uk/pub/databases/Pfam/releases/), "
modloadmsg += "uncompress it and process it using the `hmmpress` command.\n"

moduleclass = 'bio'
